# Default values for librenms.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
librenms:
  image:
    # -- repository is the image repository to pull from.
    repository: librenms/librenms
    # -- tag is image tag to pull.
    tag: 25.5.0

  # -- Laravel appkey used by LibreNMS, this should be generated by you and is a
  # required setting. See the README for more information
  appkey:

  # -- Existing secret name to use for appkey
  # Must have the key 'appkey' as above
  existingSecret: false

  # -- Timezone used by librenms for communication with RRD cached
  timezone: UTC

  # -- Custom configuration options for LibreNMS. Fore more infomation on options
  # in this file check the following link:
  # https://docs.librenms.org/Support/Configuration/
  configuration: |
    $config['distributed_poller_group']          = '0';
    $config['distributed_poller']                = true;

  # Frontend container configurations options
  frontend:
    # -- Frontend replicas
    replicas: 1
    readinessProbe:
      httpGet:
        # -- Check endpoint path
        path: /login
        # -- Check endpoint port
        port: 8000
      initialDelaySeconds: 30
      periodSeconds: 60
      timeoutSeconds: 10
    # -- resources defines the computing resources (CPU and memory)
    # that are allocated to the containers running within the Pod.
    resources: {}
      # We usually recommend not to specify default resources and to leave this as a conscious
      # choice for the user. This also increases chances charts run on environments with little
      # resources, such as Minikube. If you do want to specify resources, uncomment the following
      # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
      # requests:
      #   cpu: 50m
      #   memory: 150M

  # Distributed poller container configurations options
  poller:
    # -- Poller replicas
    replicas: 2
    # -- resources defines the computing resources (CPU and memory)
    # that are allocated to the containers running within the Pod.
    resources: {}
      # requests:
      #   cpu: 500m
      #   memory: 200M

  # -- SNMP network discovery scanner cron job. This job is optional and only use
  # when having snmp network discovery enabled. For this to work either set the
  # 'nets' confifuration in the custom config on in the admin interface
  # See the following link for more information:
  # https://docs.librenms.org/Extensions/Auto-Discovery/
  snmp_scanner:
    # -- SNMP scanner enabled
    enabled: false
    # -- SNMP scanner cornjob syntac interval
    cron: 15 * * * *
    # -- resources defines the computing resources (CPU and memory)
    # that are allocated to the containers running within the Pod.
    resources: {}
      # requests:
      #   cpu: 500m
      #   memory: 200M
    # Extra environment variable for LibreNMS SNMP scanner container
    # -- SNMP scanner extra envs
    extraEnvs: {}

  # Extra environment variable for LibreNMS container
  # -- LibreNMS frontend extra envs
  extraEnvs: {}

  # -- RRD cached is the tool that allows for distributed polling and is mandatory
  # in this LibreNMS helm chart. See the rrdcached documentation for more
  # information: https://oss.oetiker.ch/rrdtool/doc/rrdcached.en.html
  rrdcached:
    image:
      # -- repository is the image repository to pull from.
      repository: crazymax/rrdcached
      # -- tag is image tag to pull.
      tag: 1.8.0
    persistence:
      # -- RRDCached persistent volume enabled
      enabled: true
      journal:
        # -- RRDCached journal PV size
        size: 1Gi
      rrdcached:
        # -- RRDCached RRD storage PV size
        size: 10Gi
    # -- resources defines the computing resources (CPU and memory)
    # that are allocated to the containers running within the Pod.
    resources: {}
      # requests:
      #   cpu: 100m
      #   memory: 500M
    livenessProbe:
      # -- RRD cached liveness probe
      tcpSocket:
        port: 42217
      initialDelaySeconds: 15
      periodSeconds: 20
    envs:
    # -- env variables RRD Cached
    - name: TZ
      value: "Europe/Amsterdam"
    - name: WRITE_JITTER
      value: '1800'
    - name: WRITE_TIMEOUT
      value: '1800'

    # -- Extra environment variable for RRDCACHED container
    extraEnvs: {}

# -- LibreNMS ingress configuration
ingress:
  # -- Enable or disable ingress
  enabled: false
  # -- Ingress class name
  className: ""
  # -- Ingress annotations
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  # -- Ingress ingress rules
  hosts:
    - host: chart-example.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

# -- Configuration for MySQL dependency chart by Bitnami. See their chart for
# more information: https://github.com/bitnami/charts/tree/master/bitnami/mysql
mysql:
  enabled: true
  auth:
    username: librenms
    database: librenms

# -- Configuration for redis dependency chart by Bitnami. See their chart for
# more information: https://github.com/bitnami/charts/tree/master/bitnami/redis
redis:
  enabled: true
  auth:
    enabled: false
    sentinel: false

  sentinel:
    enabled: false

  master:
    disableCommands: []

  architecture: standalone
